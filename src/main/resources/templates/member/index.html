<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Jua&family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Gowun+Batang&family=Jua&family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">       

    
    <script>
    //     // 인덱스 페이지 로딩 시 실행
    //     window.onload = function() {
    //     const urlParams = new URLSearchParams(window.location.search);
    //     const login_success = urlParams.get('login_success');
    //     console.log("login_success : " + login_success)

    //     if (login_success === 'true') {
    //         var popup = document.getElementById("popup"); 
    //         var overlay = document.getElementById("overlay"); // 수정: "overlay"로 변경
    //         popup.style.display = "none";
    //         overlay.style.display = "none";
    //         window.location.href = "http://localhost:8080/user/index";
    //     }
    // };

    function autoClickOnCurrentPage() {
            document.body.click(); // 현재 페이지를 클릭함
        }

        document.addEventListener("DOMContentLoaded", function() {
            autoClickOnCurrentPage(); // 페이지 로드 후 한 번 자동 클릭
        });
        
        window.onload = function() {
            // closeModalOnOtherPage();
        };

        function closeModalOnOtherPage() {
            // 다른 페이지의 closeModal 함수를 호출하여 모달을 닫습니다.
            const otherWindow = window.open('http://localhost:8080/index"', '_blank'); // 다른 페이지를 엽니다.
            if (otherWindow) {
                otherWindow.closePopup(); // 다른 페이지의 closeModal 함수를 호출합니다.
            } else {
                alert('팝업 차단을 해제하거나, 다른 페이지가 열리지 않았습니다.');
            }
        }

    </script>

    


</head>
<body>
    <!-- HTML 코드 -->
    <div class="logo">Emoti</div>
    <header>
        <div class="logo">Emoti</div>
        <nav>
            <!-- 로그인과 내 정보 버튼을 추가하고 오른쪽으로 배치합니다. -->
            <button class="btn my-account-btn"><a href="/logout">로그아웃</a></button>
            <button class="btn my-account-btn">{{username}} Page</button>
        </nav>
    </header>


    <section id="section5">
        <br><br>
        <h2 id="quote">-명언-</h2>
        <br>
        <p1 id="author">-저자-</p1>
        <br><br>
    </section>

    <script>
        // 30개의 명언 및 저자 목록
        const quotes = [
            {quote: "행복은 인생의 목적이 아니라 인생을 사는 방법이다.", author: "알버트 아인슈타인"},
            {quote: "행복은 우리가 사는 방식에 달려있다.", author: "댈 카네기"},
            {quote: "성공은 준비된 사람이 온다.", author: "제이크 노튼"},
            {quote: "최고의 복은 다른 사람을 행복하게 하는 것이다.", author: "알버트 슈바이처"},
            {quote: "당신이 할 수 있다고 믿든 할 수 없다고 믿든, 확실해진다.", author: "헨리 포드"},
            {quote: "매일 매일이 새로운 학습이다.", author: "제이크 노튼"},
            {quote: "성공의 열쇠는 무엇보다도 열정이다.", author: "아노니무스"},
            {quote: "어려운 시간을 견디고 이겨낼 수 있는 사람은 이기는 사람이다.", author: "로버트 H. 슐러"},
            {quote: "가장 좋은 시간은 지금이다.", author: "안드레 쥬이르"},
            {quote: "가장 어두운 밤이 가장 처음에 등장하는 해를 기다린다.", author: "안토니 데미로스"},
            {quote: "당신이 매일 무엇을 결정하는가가 중요하다. 올바른 것을 선택하면 행복해질 것이다.", author: "알버트 슈바이처"},
            {quote: "어제는 역사이고, 내일은 미스테리이다. 오늘은 선물이다.", author: "빌 키어"},
            {quote: "길이 있는 사람은 반드시 간다.", author: "한니발"},
            {quote: "성공은 짧은 시간에 오지 않는다.", author: "윌리엄 셰익스피어"},
            {quote: "용기는 두려움이 끝나는 그 순간까지만 필요하다.", author: "엘리너 루즈벨트"},
            {quote: "성공은 간단한 것이다. 근면이나 노력이란 없다. 단지 어떻게 인내심을 가지고 기다리는가의 문제일 뿐이다.", author: "소포클레스"},
            {quote: "성공의 비결은 단 한 가지, 그것이 열정이다.", author: "팔로알토"},
            {quote: "어제의 꿈은 오늘의 목표이고, 오늘의 노력은 내일의 성취이다.", author: "로버트 셩스토리"},
            {quote: "평범한 것을 행하는 것이 성공의 첫 걸음이다.", author: "윌리엄 제임스"},
            {quote: "사람은 생각하는 대로 된다.", author: "브루스 리 린든"},
            {quote: "행복한 시간을 가져야 할 용기가 있는 사람은 그 시간이 두 배로 행복하다.", author: "세네카"},
            {quote: "가장 어두운 밤이 가장 처음에 등장하는 해를 기다린다.", author: "안토니 데미로스"},
            {quote: "내일의 운명은 오늘의 선택에 달려 있다.", author: "알베르 카뮈"},
            {quote: "성공은 주어지는 것이 아니라 노력해서 얻어진다.", author: "다윈"},
            {quote: "열정은 인내와 노력을 이긴다.", author: "미셸 피카르"},
            {quote: "모든 일에는 두려움이 있는데, 그것을 이기는 사람만이 진정으로 성공할 수 있다.", author: "하비 파이어스톤"},
            {quote: "어떤 문제든지 해결책은 하나다. 그것은 끝까지 버텨내는 힘이다.", author: "나폴레옹 힐"},
            {quote: "인생에서 두 번의 실패는 삶의 더 큰 승리를 가져온다.", author: "콜린 파월"},
            {quote: "우리는 항상 최선을 다해야 한다. 그리고 그것은 우리의 주요한 의무이다.", author: "윈스턴 처칠"},
            {quote: "계획없는 목표는 바람에 밀려 조종이 불가능하다.", author: "슈페이어"},
            {quote: "계획을 세우는 것은 목표를 가진 사람에게 특별한 도구를 제공한다.", author: "크리스토퍼 마지너스"},
            {quote: "나는 나의 한계를 안다. 그것이 내가 그 너머로 가는 이유다.", author: "-세르주 갱스부르-"},
        ];

        // 페이지가 로드될 때마다 랜덤한 명언 및 저자를 선택하여 표시
        window.onload = function() {
            const quoteElement = document.getElementById('quote');
            const authorElement = document.getElementById('author');
            const randomIndex = Math.floor(Math.random() * quotes.length);
            quoteElement.innerText = quotes[randomIndex].quote;
            authorElement.innerText = quotes[randomIndex].author;
        };
    </script>
    
    <section id="section1">
        <h2>우리의 기분</h2>
        <p>오늘 우리는 맑음^^</p>
        <br><br>
        <!-- 기존 이미지 대신 버튼 추가 -->
        <figure onclick="openGraphPopup()">
            <img src="/static/img/smile.png" alt="이미지 1" style="width: 200px; height: auto;">
        </figure>
        <div class="graph-popup" id="graphPopup">
            <iframe id="graphPopupFrame" src="" frameborder="0" style="width: 100%; height: 100%;"></iframe>
        </div>
        <div class="graph-overlay" id="graphOverlay" onclick="closeGraphPopup()"></div>
        
        <script>
            var currentPopup = null;
            
            function openGraphPopup() {
                var popup = document.getElementById("graphPopup");
                var overlay = document.getElementById("graphOverlay");
                popup.style.display = "block";
                overlay.style.display = "block";
                currentPopup = popup;
                document.getElementById("graphPopupFrame").src = "graphs.html"; // 두 번째 HTML 페이지를 로드
            }
            
            function closeGraphPopup() {
                var popup = document.getElementById("graphPopup");
                var overlay = document.getElementById("graphOverlay");
                popup.style.display = "none";
                overlay.style.display = "none";
                currentPopup = null;
            }

    
            
        </script>
        <br><br>
    </section>


    <section id="section2">
        <br><br><br>
        <h2>오늘 나의 기분</h2>
        <p>오늘은 기분이 어떠신가요?</p>
        <br><br>
        <div class="image-container">
            <figure  onclick="showCaption('행복')">
                <img src="/static/img/행복.png" alt="이미지 1" style="width: 100px; height: auto;">
                <figcaption>행복</figcaption>
            </figure>
            <figure>
                <img src="/static/img/평온.png" alt="이미지 2" style="width: 100px; height: auto;">
                <figcaption>평온</figcaption>
            </figure>
            <figure>
                <img src="/static/img/놀람.png" alt="이미지 3" style="width: 100px; height: auto;">
                <figcaption>놀람</figcaption>
            </figure>
            <figure>
                <img src="/static/img/슬픔.png" alt="이미지 4" style="width: 100px; height: auto;">
                <figcaption>슬픔</figcaption>
            </figure>
            <figure>
                <img src="/static/img/화남.png" alt="이미지 5" style="width: 100px; height: auto;">
                <figcaption>화남</figcaption>
            </figure>
        </div>
        
        <br><br><br>
    </section>
    <script>
        function showCaption(caption) {
            alert(caption);
        }
    </script>
    

    <section id="section3">
        <br><br><br>
        <h2>내 기분이 왜 이럴까?</h2>
        <p>혹시 내 기분에 영향을 미친 일들은 없을까요?</p>
        <br><br>
        
        <div class="sub-section-container">
            <div class="sub-section">
                <p>날씨</p>
                <br>
                <img src="/static/img/smile.png" alt="이미지 1" style="width: 80px;">
                <p>맑음</p>
            </div>
            
            <div class="sub-section">
                <p>날씨</p>
                <br>
                <img src="/static/img/smile.png" alt="이미지 1" style="width: 80px;">
                <p>맑음</p>
            </div>
            
            <div class="sub-section">
                <p>날씨</p>
                <br>
                <img src="/static/img/smile.png" alt="이미지 1" style="width: 80px;">
                <p>맑음</p>
            </div>
        </div>
        <br><br><br>
    </section>
    
    
    
    
    

    <section id="section4">
        <br><br><br>
        <h2>와글와글 떠듭시당</h2>
        <br>
        <form class="comment-form" action="#" method="post">
            <textarea name="comment" placeholder="와글와글 떠들어주세요!(500자까지만!)" maxlength="500" required></textarea><br>
            <input type="submit" value="와글와글">
        </form>
        <br><br><br>
        <div class="comment-list">
            <h2>왁자지껄</h2>
            <div class="comments"></div>
            <div class="pagination"></div>
        </div>
    </div>
    
    <script>
    // 댓글 데이터 (예시)
    const comments = [
        { author: "작성자1", content: "이것은 첫 번째 댓글입니다." },
        { author: "작성자2", content: "두 번째 댓글은 어떨까요?" },
        { author: "작성자3", content: "세 번째 댓글도 추가해보겠습니다." },
        { author: "작성자1", content: "이것은 첫 번째 댓글입니다." },
        { author: "작성자2", content: "두 번째 댓글은 어떨까요?" },
        { author: "작성자3", content: "세 번째 댓글도 추가해보겠습니다." },
        { author: "작성자1", content: "이것은 첫 번째 댓글입니다." },
        { author: "작성자2", content: "두 번째 댓글은 어떨까요?" },
        { author: "작성자3", content: "세 번째 댓글도 추가해보겠습니다." },
        { author: "작성자1", content: "이것은 첫 번째 댓글입니다." },
        { author: "작성자2", content: "두 번째 댓글은 어떨까요?" },
        { author: "작성자3", content: "세 번째 댓글도 추가해보겠습니다." },
        // 추가 댓글 데이터
    ];
    
    const commentsPerPage = 5; // 한 페이지에 보일 댓글 수
    let currentPage = 1; // 현재 페이지
    
    

// 수정 기능
function editComment(index) {
    const commentElement = document.querySelector('.comment:nth-child(' + (index + 1) + ')');
    
    // 이미 수정 폼이 열려 있는지 확인
    if (commentElement.querySelector('.edit-form')) {
        return; // 수정 폼이 이미 열려있으면 더 이상 처리하지 않음
    }
    
    const commentContent = commentElement.querySelector('.comment-content');
    const originalContent = commentContent.querySelector('p').textContent;

    // 원래 내용 보이기
    commentContent.style.display = 'block';

    // 수정 폼 추가
    const editForm = document.createElement('div');
    editForm.classList.add('edit-form');
    editForm.innerHTML = `
        <textarea class="edit-content" maxlength="500">${originalContent}</textarea>
        <div class="button-container">
            <button onclick="saveEdit(${index})">저장</button>
            <button onclick="cancelEdit(${index})">취소</button>
        </div>
    `;
    commentElement.appendChild(editForm);
}

// 저장 기능
function saveEdit(index) {
    const editedContent = document.querySelector('.comment:nth-child(' + (index + 1) + ') .edit-content').value;
    comments[index].content = editedContent;

    // 수정 완료 후 수정 폼 제거
    const commentElement = document.querySelector('.comment:nth-child(' + (index + 1) + ')');
    commentElement.removeChild(commentElement.querySelector('.edit-form'));

    // 다시 댓글 표시
    displayComments();
}

// 취소 기능
function cancelEdit(index) {
    const commentElement = document.querySelector('.comment:nth-child(' + (index + 1) + ')');
    // 수정 폼 제거
    commentElement.removeChild(commentElement.querySelector('.edit-form'));
    
    // 원래 내용 보이기
    commentElement.querySelector('.comment-content').style.display = 'block';
}




// 삭제 기능
function deleteComment(index) {
    const confirmation = confirm("정말로 이 댓글을 삭제하시겠습니까?");
    if (confirmation) {
        comments.splice(index, 1);
        displayComments();
    }
}

// 댓글 목록 및 페이지 링크를 표시하는 함수
function displayComments() {
    const commentList = document.querySelector('.comments');
    const pagination = document.querySelector('.pagination');

    commentList.innerHTML = '';
    pagination.innerHTML = '';

    const startIndex = (currentPage - 1) * commentsPerPage;
    const endIndex = startIndex + commentsPerPage;
    const displayedComments = comments.slice(startIndex, endIndex);

    displayedComments.forEach((comment, index) => {
        const commentElement = document.createElement('div');
        commentElement.classList.add('comment');
        commentElement.innerHTML = `
            <div class="comment-content">
                <p><span class="comment-author">${comment.author}:</span> ${comment.content}</p>
            </div>
            <div class="comment-buttons">
                <button onclick="editComment(${startIndex + index})">수정</button>
                <button onclick="deleteComment(${startIndex + index})">삭제</button>
            </div>
        `;
        commentList.appendChild(commentElement);
    });

    const totalPages = Math.ceil(comments.length / commentsPerPage);
    for (let i = 1; i <= totalPages; i++) {
        const pageLink = document.createElement('a');
        pageLink.classList.add('page-link');
        pageLink.textContent = i;
        pageLink.addEventListener('click', () => {
            currentPage = i;
            displayComments();
        });
        pagination.appendChild(pageLink);
    }
}

// 페이지 로드 시 댓글 표시
displayComments();

    </script>
    <br><br><br>
    </section>

    
    
</body>
</html>

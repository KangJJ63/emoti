<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page</title>
    <link rel="stylesheet" href="../static/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Jua&family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Gowun+Batang&family=Jua&family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">       
</head>
<body>
    <!-- HTML 코드 -->
    <div class="logo">Emoti</div>
    <header>
        <div class="logo">Emoti</div>
        <nav>
            <!-- 로그인과 내 정보 버튼을 추가하고 오른쪽으로 배치합니다. -->
            <button class="btn login-btn" onclick="toggleModal()">로그인</button>
            <button class="btn my-account-btn">My Account</button>
        </nav>
    </header>

    <!-- 모달 -->
<div class="modal">
    <div class="loginPage" id="loginPage"> <!-- 화면 중앙에 위치하기 위한 div 추가 -->
        <form class="loginForm" action="/login" method="post">
            <h2>로그인</h2>
            <input class="loginText" type="text" name="username" placeholder="아이디" required>
            <input class="loginPassword" type="password" name="password" placeholder="비밀번호" required>
            <input class="loginSubmit" type="submit" value="로그인">
            <button class="signup-button" onclick="showSignUpForm()">회원가입</button>
            <div class="social-login">
                <img src="../static/img/smile.png" onclick="kakaoLogin()">
                <img src="../static/img/smile.png" onclick="naverLogin()">
                <img src="../static/img/smile.png" onclick="googleLogin()">
            </div>
        </form>
    </div> <!-- 중앙 정렬을 위한 div 종료 -->
    <div class="signUpPage" id="signUpPage" style="display:none;"> <!-- 회원가입 폼 -->
        <form class="signUpForm" action="/join" method="post">
            <h2>회원가입</h2>
            <!-- name은 userEntity를 따름 -->
            <input class="signUpNickname" type="text" name="nickname" placeholder="아이디" required>
            <input class="signUpEmail" type="email" name="email" placeholder="이메일" required>
            <input class="signUpPassword" type="password" name="password" placeholder="비밀번호" required>
            <input class="signUpPasswordCheck" type="password" name="pwdCheck" placeholder="비밀번호 확인" required>
            <input class="signUpSubmit" type="submit" value="회원가입">
            <button class="back-to-login" onclick="backToLoginPage()">로그인으로 돌아가기</button>
        </form>
    </div>
</div>

<script>
    function showSignUpForm() {
        document.getElementById('loginPage').style.display = 'none'; // 로그인 폼 숨기기
        document.getElementById('signUpPage').style.display = 'block'; // 회원가입 폼 보이기
    }

    function backToLoginPage() {
        document.getElementById('signUpPage').style.display = 'none'; // 회원가입 폼 숨기기
        document.getElementById('loginPage').style.display = 'block'; // 로그인 폼 보이기
    }

    function kakaoLogin() {
        // 카카오 로그인 처리
    }

    function naverLogin() {
        // 네이버 로그인 처리
    }

    function googleLogin() {
        // 구글 로그인 처리
    }
</script>

<script>
    const body = document.querySelector('body');
    const modal = document.querySelector('.modal');
    const loginBtn = document.querySelector('.login-btn');

    function toggleModal() {
        modal.classList.toggle('show');

        if (modal.classList.contains('show')) {
            body.style.overflow = 'hidden';
        } else {
            body.style.overflow = 'auto';
        }
    }

    modal.addEventListener('click', (event) => {
        if (event.target === modal) {
            toggleModal();
        }
    });

    // 모달 외부를 클릭했을 때 모달이 사라지도록 설정
    body.addEventListener('click', (event) => {
        if (!modal.contains(event.target) && event.target !== loginBtn) {
            modal.classList.remove('show');
            body.style.overflow = 'auto';
        }
    });
</script>


    <section id="section5">
        <br><br>
        <h2>"고독한 사람을 내버려둬라.<br> 그는 지금 신을 만나고 있다."</h2>
        <br>
        <p1>-릴케-</p1>
        <br><br>
    </section>
    
    <section id="section1">
        <br><br><br>
        <h2>우리의 기분</h2>
        <p>오늘 우리는 맑음^^</p>
        <br><br>
        <img src="../static/img/smile.png" alt="기쁨" style="width: 200px;">
        <br><br><br>
    </section>

    

    <section id="section2">
        <br><br><br>
        <h2>오늘 나의 기분</h2>
        <p>오늘은 기분이 어떠신가요?</p>
        <br><br>
        <div class="image-container">
            <figure  onclick="showCaption('행복')">
                <img src="../static/img/행복.png" alt="이미지 1" style="width: 100px; height: auto;">
                <figcaption>행복</figcaption>
            </figure>
            <figure>
                <img src="../static/img/평온.png" alt="이미지 2" style="width: 100px; height: auto;">
                <figcaption>평온</figcaption>
            </figure>
            <figure>
                <img src="../static/img/놀람.png" alt="이미지 3" style="width: 100px; height: auto;">
                <figcaption>놀람</figcaption>
            </figure>
            <figure>
                <img src="../static/img/슬픔.png" alt="이미지 4" style="width: 100px; height: auto;">
                <figcaption>슬픔</figcaption>
            </figure>
            <figure>
                <img src="../static/img/화남.png" alt="이미지 5" style="width: 100px; height: auto;">
                <figcaption>화남</figcaption>
            </figure>
        </div>
        
        <br><br><br>
    </section>
    <script>
        function showCaption(caption) {
            alert(caption);
        }
    </script>
    

    <section id="section3">
        <br><br><br>
        <h2>내 기분이 왜 이럴까?</h2>
        <p>혹시 내 기분에 영향을 미친 일들은 없을까요?</p>
        <br><br>
        
        <div class="sub-section-container">
            <div class="sub-section">
                <p>날씨</p>
                <br>
                <img src="../static/img/smile.png" alt="이미지 1" style="width: 80px;">
                <p>맑음</p>
            </div>
            
            <div class="sub-section">
                <p>날씨</p>
                <br>
                <img src="../static/img/smile.png" alt="이미지 1" style="width: 80px;">
                <p>맑음</p>
            </div>
            
            <div class="sub-section">
                <p>날씨</p>
                <br>
                <img src="../static/img/smile.png" alt="이미지 1" style="width: 80px;">
                <p>맑음</p>
            </div>
        </div>
        <br><br><br>
    </section>
    
    
    
    
    

    <section id="section4">
        <br><br><br>
        <h2>와글와글 떠듭시당</h2>
        <br>
        <form class="comment-form" action="#" method="post">
            <textarea name="comment" placeholder="와글와글 떠들어주세요!(500자까지만!)" maxlength="500" required></textarea><br>
            <input type="submit" value="와글와글">
        </form>
        <br><br><br>
        <div class="comment-list">
            <h2>왁자지껄</h2>
            <div class="comments"></div>
            <div class="pagination"></div>
        </div>
    </div>
    
    <script>
    // 댓글 데이터 (예시)
    const comments = [
        { author: "작성자1", content: "이것은 첫 번째 댓글입니다." },
        { author: "작성자2", content: "두 번째 댓글은 어떨까요?" },
        { author: "작성자3", content: "세 번째 댓글도 추가해보겠습니다." },
        { author: "작성자1", content: "이것은 첫 번째 댓글입니다." },
        { author: "작성자2", content: "두 번째 댓글은 어떨까요?" },
        { author: "작성자3", content: "세 번째 댓글도 추가해보겠습니다." },
        { author: "작성자1", content: "이것은 첫 번째 댓글입니다." },
        { author: "작성자2", content: "두 번째 댓글은 어떨까요?" },
        { author: "작성자3", content: "세 번째 댓글도 추가해보겠습니다." },
        { author: "작성자1", content: "이것은 첫 번째 댓글입니다." },
        { author: "작성자2", content: "두 번째 댓글은 어떨까요?" },
        { author: "작성자3", content: "세 번째 댓글도 추가해보겠습니다." },
        // 추가 댓글 데이터
    ];
    
    const commentsPerPage = 5; // 한 페이지에 보일 댓글 수
    let currentPage = 1; // 현재 페이지
    
    

// 수정 기능
function editComment(index) {
    const commentElement = document.querySelector('.comment:nth-child(' + (index + 1) + ')');
    
    // 이미 수정 폼이 열려 있는지 확인
    if (commentElement.querySelector('.edit-form')) {
        return; // 수정 폼이 이미 열려있으면 더 이상 처리하지 않음
    }
    
    const commentContent = commentElement.querySelector('.comment-content');
    const originalContent = commentContent.querySelector('p').textContent;

    // 원래 내용 보이기
    commentContent.style.display = 'block';

    // 수정 폼 추가
    const editForm = document.createElement('div');
    editForm.classList.add('edit-form');
    editForm.innerHTML = `
        <textarea class="edit-content" maxlength="500">${originalContent}</textarea>
        <div class="button-container">
            <button onclick="saveEdit(${index})">저장</button>
            <button onclick="cancelEdit(${index})">취소</button>
        </div>
    `;
    commentElement.appendChild(editForm);
}

// 저장 기능
function saveEdit(index) {
    const editedContent = document.querySelector('.comment:nth-child(' + (index + 1) + ') .edit-content').value;
    comments[index].content = editedContent;

    // 수정 완료 후 수정 폼 제거
    const commentElement = document.querySelector('.comment:nth-child(' + (index + 1) + ')');
    commentElement.removeChild(commentElement.querySelector('.edit-form'));

    // 다시 댓글 표시
    displayComments();
}

// 취소 기능
function cancelEdit(index) {
    const commentElement = document.querySelector('.comment:nth-child(' + (index + 1) + ')');
    // 수정 폼 제거
    commentElement.removeChild(commentElement.querySelector('.edit-form'));
    
    // 원래 내용 보이기
    commentElement.querySelector('.comment-content').style.display = 'block';
}




// 삭제 기능
function deleteComment(index) {
    const confirmation = confirm("정말로 이 댓글을 삭제하시겠습니까?");
    if (confirmation) {
        comments.splice(index, 1);
        displayComments();
    }
}

// 댓글 목록 및 페이지 링크를 표시하는 함수
function displayComments() {
    const commentList = document.querySelector('.comments');
    const pagination = document.querySelector('.pagination');

    commentList.innerHTML = '';
    pagination.innerHTML = '';

    const startIndex = (currentPage - 1) * commentsPerPage;
    const endIndex = startIndex + commentsPerPage;
    const displayedComments = comments.slice(startIndex, endIndex);

    displayedComments.forEach((comment, index) => {
        const commentElement = document.createElement('div');
        commentElement.classList.add('comment');
        commentElement.innerHTML = `
            <div class="comment-content">
                <p><span class="comment-author">${comment.author}:</span> ${comment.content}</p>
            </div>
            <div class="comment-buttons">
                <button onclick="editComment(${startIndex + index})">수정</button>
                <button onclick="deleteComment(${startIndex + index})">삭제</button>
            </div>
        `;
        commentList.appendChild(commentElement);
    });

    const totalPages = Math.ceil(comments.length / commentsPerPage);
    for (let i = 1; i <= totalPages; i++) {
        const pageLink = document.createElement('a');
        pageLink.classList.add('page-link');
        pageLink.textContent = i;
        pageLink.addEventListener('click', () => {
            currentPage = i;
            displayComments();
        });
        pagination.appendChild(pageLink);
    }
}

// 페이지 로드 시 댓글 표시
displayComments();

    </script>
    <br><br><br>
    </section>

    
    
</body>
</html>
